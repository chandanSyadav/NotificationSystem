@{
    ViewData["Title"] = "Real-Time Notifications";
}

<h2>🔔 Real-Time Notifications</h2>

<div class="alert alert-info" id="notificationArea" style="display:none;"></div>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/notificationHub")
            .configureLogging(signalR.LogLevel.Information)
            .build();

        connection.on("ReceiveNotification", function (message) {
            const alertBox = document.getElementById("notificationArea");
            alertBox.innerText = message;
            alertBox.style.display = "block";

            // Auto-hide after 5 seconds
            setTimeout(() => {
                alertBox.style.display = "none";
            }, 5000);
        });

        connection.start().then(function () {
            console.log("SignalR connected.");
        }).catch(function (err) {
            return console.error(err.toString());
        });
    </script>
}
